"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1667],{99118:function(n,e,t){t.d(e,{pm:function(){return r.p}});t(22642);var r=t(47684);t(45689),t(67294)},45689:function(n,e,t){t(67294)},15368:function(n,e,t){t.d(e,{Y:function(){return l}});var r=t(50029),i=t(87794),o=t.n(i),a=t(84789),u=t(85805).default,s="/catalog_svc/rnr/api/external/v1/review",l=function(){var n=function(){var n=(0,r.Z)(o().mark((function n(e){var t,r,i,l,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.reviewId,r=void 0===t?"":t,i=e.action,l={review_id:r,action:void 0===i||i},c={},n.prev=3,n.next=6,u.csr("".concat(s,"/toggle_like"),{method:"POST",body:JSON.stringify(l)});case 6:c=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),(0,a.Z)(n.t0);case 12:return n.abrupt("return",c);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}(),e=function(){var n=(0,r.Z)(o().mark((function n(e){var t,r,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.reviewId,r={review_id:void 0===t?"":t},i={},n.prev=3,n.next=6,u.csr("".concat(s,"/flag_review"),{method:"POST",body:JSON.stringify(r)});case 6:i=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),(0,a.Z)(n.t0);case 12:return n.abrupt("return",i);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}(),t=function(){var n=(0,r.Z)(o().mark((function n(e){var t,r,i,l,c,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.rating,r=void 0===t?5:t,i=e.solicitationId,l=void 0===i?"":i,c={rating:r},d={},n.prev=3,n.next=6,u.csr("".concat(s,"/sku?solicitation_id=").concat(l),{method:"POST",body:JSON.stringify(c)});case 6:d=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),(0,a.Z)(n.t0);case 12:return n.abrupt("return",d);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(e){return n.apply(this,arguments)}}();return{likeReview:n,reportReview:e,updateRatings:t}}()},11667:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var r=t(50029),i=t(87794),o=t.n(i),a=t(67294),u=t(5152),s=t.n(u),l=t(15368),c=t(99118),d=t(71381),v=t(40219),p=t(85893),f=s()((function(){return t.e(83).then(t.bind(t,50083))}),{ssr:!1,loadableGenerated:{webpack:function(){return[50083]}}}),g=s()((function(){return t.e(3426).then(t.bind(t,63426))}),{ssr:!1,loadableGenerated:{webpack:function(){return[63426]}}}),w=s()((function(){return t.e(7044).then(t.bind(t,67044))}),{ssr:!1,loadableGenerated:{webpack:function(){return[67044]}}}),_=s()((function(){return t.e(4722).then(t.bind(t,54722))}),{ssr:!1,loadableGenerated:{webpack:function(){return[54722]}}}),b=s()((function(){return t.e(6434).then(t.bind(t,46434))}),{ssr:!1,loadableGenerated:{webpack:function(){return[46434]}}}),h=s()((function(){return t.e(5513).then(t.bind(t,95513))}),{ssr:!1,loadableGenerated:{webpack:function(){return[95513]}}}),m=s()((function(){return t.e(6133).then(t.bind(t,36133))}),{ssr:!1,loadableGenerated:{webpack:function(){return[36133]}}});function k(n){var e,t,i,u,s,k,x,y,S,R,j,I,N,O,T=n.rnrData,G=void 0===T?{}:T,Z=(0,a.useState)((null===G||void 0===G||null===(e=G.my_review)||void 0===e||null===(t=e.user_review)||void 0===t?void 0:t.rating)||0),C=Z[0],P=Z[1],D=(0,a.useState)((null===G||void 0===G||null===(i=G.my_review)||void 0===i||null===(u=i.user_review)||void 0===u?void 0:u.completion_score)||"000"),E=D[0],J=D[1],Y=!!Object.keys((null===G||void 0===G?void 0:G.my_review)||{}).length,A=(null===G||void 0===G||null===(s=G.my_review)||void 0===s?void 0:s.solicitation_id)||"",U=["000","100","101"].includes(E)&&A,q=["110","111"].includes(E),z=(0,c.pm)(),B=a.useContext(d.hv).packSelected,F=function(n){var e=n.message,t=void 0===e?"":e,r=n.type;z({msg:t,type:void 0===r?"Success":r})},H=function(n){var e,t=n.rating;(0,v.triggerSnowplowEventProductInteractions)({EventName:"Ratings_clicked",ScreenType:"pd",ScreenTypeID:Number(null===B||void 0===B?void 0:B.id),SkuID:Number(null===B||void 0===B||null===(e=B.rating_info)||void 0===e?void 0:e.sku_id),InPageContext:"rnr_section_pd",AdditionalInfo2:"".concat(t)})},K=function(){var n=(0,r.Z)(o().mark((function n(e){var t,r,i,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.Y.updateRatings({rating:e,solicitationId:A});case 2:null!==(t=n.sent)&&void 0!==t&&t.user_review?(P(null===t||void 0===t||null===(r=t.user_review)||void 0===r?void 0:r.rating),J(null===t||void 0===t||null===(i=t.user_review)||void 0===i?void 0:i.completion_score),H({rating:null===t||void 0===t||null===(a=t.user_review)||void 0===a?void 0:a.rating}),F({message:"Thanks for rating!"})):F({message:"Sorry something went wrong. Please try later",type:"Danger"});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return null!==G&&void 0!==G&&null!==(k=G.rating_stats)&&void 0!==k&&k.ratings_count||!U?null===G||void 0===G||null===(x=G.rating_stats)||void 0===x||!x.ratings_count||null!==G&&void 0!==G&&null!==(y=G.rating_stats)&&void 0!==y&&y.reviews_count||A&&!U?(0,p.jsxs)(g,{children:[!Y&&!(null===G||void 0===G||null===(S=G.rating_stats)||void 0===S||!S.reviews_count)&&(0,p.jsx)(f,{}),(0,p.jsxs)("div",{className:"border-silverSurfer-200 grid grid-cols-3 gap-6 grid-flow-row auto-rows-auto items-start",children:[!(null===G||void 0===G||null===(R=G.rating_stats)||void 0===R||!R.ratings_count)&&(0,p.jsx)(_,{ratingStats:null===G||void 0===G?void 0:G.rating_stats,featureStats:null===G||void 0===G?void 0:G.feature_stats,solicitationId:A,completionScore:E,updateRatings:K,userRating:C,canRateOrReview:U,showToast:F}),(0,p.jsx)("div",{className:null!==G&&void 0!==G&&null!==(j=G.rating_stats)&&void 0!==j&&j.ratings_count?"col-span-2":"col-span-full",children:null!==G&&void 0!==G&&null!==(I=G.rating_stats)&&void 0!==I&&I.reviews_count||q?(0,p.jsx)(b,{showUserReview:q,myReview:null===G||void 0===G?void 0:G.my_review,topReviews:null===G||void 0===G?void 0:G.top_reviews,reviewsTotal:null===G||void 0===G?void 0:G.reviews_total,showToast:F,ratingCount:null===G||void 0===G||null===(N=G.rating_stats)||void 0===N?void 0:N.ratings_count}):(0,p.jsx)(h,{})})]})]}):(0,p.jsx)(g,{children:(0,p.jsx)(m,{ratingStats:null===G||void 0===G?void 0:G.rating_stats,featureStats:null===G||void 0===G?void 0:G.feature_stats,solicitationId:A,completionScore:E,updateRatings:K,userRating:C,canRateOrReview:U})}):(0,p.jsx)(g,{children:(0,p.jsx)(w,{userRating:C,updateRatings:K,completionScore:E,solicitationId:A,ratingsCount:null===G||void 0===G||null===(O=G.rating_stats)||void 0===O?void 0:O.ratings_count})})}}}]);